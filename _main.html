<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Guia definitivo do R para estudantes de sociais</title>
  <meta name="description" content="Esta é a minha tentativa de facilitar, em especial, os alunos de ciências sociais, a desenvolveram habilidades relacionadas ao processo de analise de dados">
  <meta name="generator" content="bookdown <!--bookdown:version--> and GitBook 2.6.7">

  <meta property="og:title" content="Guia definitivo do R para estudantes de sociais" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Esta é a minha tentativa de facilitar, em especial, os alunos de ciências sociais, a desenvolveram habilidades relacionadas ao processo de analise de dados" />
  <meta name="github-repo" content="vinisousa04/livro_r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Guia definitivo do R para estudantes de sociais" />
  
  <meta name="twitter:description" content="Esta é a minha tentativa de facilitar, em especial, os alunos de ciências sociais, a desenvolveram habilidades relacionadas ao processo de analise de dados" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #0000ff; } /* Keyword */
code > span.ch { color: #008080; } /* Char */
code > span.st { color: #008080; } /* String */
code > span.co { color: #008000; } /* Comment */
code > span.ot { color: #ff4000; } /* Other */
code > span.al { color: #ff0000; } /* Alert */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #008000; font-weight: bold; } /* Warning */
code > span.cn { } /* Constant */
code > span.sc { color: #008080; } /* SpecialChar */
code > span.vs { color: #008080; } /* VerbatimString */
code > span.ss { color: #008080; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { color: #0000ff; } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #ff4000; } /* Preprocessor */
code > span.do { color: #008000; } /* Documentation */
code > span.an { color: #008000; } /* Annotation */
code > span.cv { color: #008000; } /* CommentVar */
code > span.at { } /* Attribute */
code > span.in { color: #008000; } /* Information */
</style>

</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">Guia definitivo do R para estudantes de sociais</h1>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#prefacio">Prefácio</a><ul>
<li><a href="#motivacao">Motivação</a></li>
<li><a href="#organizacao">Organização</a></li>
<li><a href="#sobre-o-autor">Sobre o autor</a></li>
<li><a href="#agradecimentos">Agradecimentos</a></li>
</ul></li>
<li><a href="#part-introducao-ao-mundo-r">(PART) Introdução ao Mundo R</a></li>
<li><a href="#r_e_rStudio"><span class="toc-section-number">1</span> R e RStudio</a><ul>
<li><a href="#o_que_sao"><span class="toc-section-number">1.1</span> O que são</a></li>
<li><a href="#layout_rstudio"><span class="toc-section-number">1.2</span> <em>Layout</em> do RStudio</a></li>
<li><a href="#scripts"><span class="toc-section-number">1.3</span> <em>Scripts</em></a></li>
<li><a href="#funcionamento_do_codigo"><span class="toc-section-number">1.4</span> Funcionamento do Código</a></li>
<li><a href="#working_directory"><span class="toc-section-number">1.5</span> <em>Working Directory</em> (ou pasta de trabalho)</a></li>
<li><a href="#pacotes"><span class="toc-section-number">1.6</span> Pacotes (ou <em>libraries</em>)</a><ul>
<li><a href="#pacotes-do-github">Pacotes do GitHub</a></li>
</ul></li>
</ul></li>
<li><a href="#primeiros-comandos-no-R"><span class="toc-section-number">2</span> Primeiros Comandos no R</a><ul>
<li><a href="#r-como-calculadora"><span class="toc-section-number">2.1</span> R como calculadora</a></li>
<li><a href="#Workspace-Environment"><span class="toc-section-number">2.2</span> <em>Workspace/Environment</em></a></li>
<li><a href="#funcoes"><span class="toc-section-number">2.3</span> Funções</a></li>
<li><a href="#ajuda-e-documentacao"><span class="toc-section-number">2.4</span> Ajuda e documentação</a><ul>
<li><a href="#erros-mensagens-e-avisos"><span class="toc-section-number">2.4.1</span> Erros, Mensagens e Avisos</a></li>
</ul></li>
</ul></li>
<li><a href="#estruturas_de_dados"><span class="toc-section-number">3</span> Estruturas de Dados</a><ul>
<li><a href="#tipos_de_dados"><span class="toc-section-number">3.1</span> Tipos de dados</a></li>
<li><a href="#vetores"><span class="toc-section-number">3.2</span> Vetores</a><ul>
<li><a href="#criando-vetores">Criando Vetores</a></li>
<li><a href="#acessando-elementos">Acessando elementos</a></li>
<li><a href="#operacoes-vetorizadas">Operações Vetorizadas</a></li>
<li><a href="#reciglagem">Reciglagem</a></li>
</ul></li>
<li><a href="#matrizes"><span class="toc-section-number">3.3</span> Matrizes</a><ul>
<li><a href="#criando-matrizes">Criando Matrizes</a></li>
<li><a href="#acessando-elementos-1">Acessando Elementos</a></li>
<li><a href="#operacoes-com-matrizes">Operações com matrizes</a></li>
</ul></li>
<li><a href="#data-frames"><span class="toc-section-number">3.4</span> Data Frames</a></li>
<li><a href="#listas"><span class="toc-section-number">3.5</span> Listas</a><ul>
<li><a href="#criando-listas">Criando listas</a></li>
<li><a href="#acessando-elementos-das-listas">Acessando elementos das listas</a></li>
</ul></li>
<li><a href="#resumo-melhorar-nome"><span class="toc-section-number">3.6</span> resumo (melhorar nome)</a></li>
</ul></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Guia definitivo do R para estudantes de sociais</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="prefacio" class="section level1 unnumbered">
<h1>Prefácio</h1>
<ul>
<li>Colocar aqui o que me feze escrever o livro motivações e inspirações.</li>
<li>Lembrar que foi dia 17/09/2017 que eu vi o <a href="https://www.youtube.com/watch?v=1POb5fx_m3I">vídeo</a> que me inspirei.</li>
</ul>
<div id="motivacao" class="section level2 unnumbered">
<h2>Motivação</h2>
<ul>
<li>De maneira sucinta este livro é minha humilde tentativa de facilitar o aprendizado e utilização da linguagem R para alunos de graduação em ciências sociais, inevitavelmente, em especial economia.</li>
<li>descrever o problema de que ao fazer trabalhos relacionados a dados (isto pe usar o excel pra guardar dados, algum software para fazer a análise copiar e colar para o word e depois se alguma coisa mudar tem que fazer toda a análise novamente)</li>
</ul>
<div id="para-quem-e-este-livro" class="section level4 unnumbered">
<h4>Para quem é este livro?</h4>
<ul>
<li>Alunos de graduação que usam estatística para fazer trabalhos, em especial (mas não exclusivamente) para os do campo de ciências sociais.</li>
<li>falar que esse livro é feito sob a premissa de <strong>facilitar a implementação/execução de trabalhos relacionados a análise de dados.</strong></li>
<li>falar que eu não pretendo ensinar a parte teórica é um livro de aplicação! Então é uma base de estatística/econometria ajuda muito a entender o livro</li>
</ul>
</div>
<div id="o-que-voce-vai-aprender-neste-livro" class="section level4 unnumbered">
<h4>O que você vai aprender neste livro</h4>
<ul>
<li>Aprender o funcionamento do R no RStudio como linguagem de programação estatística.</li>
<li>O que são o R e o RStudio <strong>(colocar aqui que não vou ensinar a instalar os programas pois há muito material sobre isso na internet)</strong></li>
<li>Mostrar os processos tradicionais de trabalhos relacionados a analise dados e mostrar como o R facilita o processo de analise dados em cada um dos processos tradicionais</li>
<li>mostrar como juntar todas esses processos podem ser todos executados no mesmo local.</li>
<li>que em atividades simples pode ser mais demorado fazer coisas no r, mas que com o aumento da complexidade da tarefa o r fica muito mais rapido de se fazer</li>
</ul>
</div>
</div>
<div id="organizacao" class="section level2 unnumbered">
<h2>Organização</h2>
<p>Esta parte mostra como o livro e os capítulos estão organizados</p>
<div id="convencoes-do-livro" class="section level4 unnumbered">
<h4>Convenções do livro</h4>
<p>descrever aqui os padrões utilizados no livro, por enquanto são:</p>
<ul>
<li>Nos chunks: <strong>&gt;</strong> indicam o código que foi executado e <strong>#</strong> resultado (<em>output</em>) do código executado.</li>
<li>No texto: palavras em outros idiomas estarão em <em>itálico</em>, coisas que estiverem relacionamdas ao R (funções, variaveis, comandos etc) estão destacados como <code>codigo</code>.</li>
<li>Os exemplos do livro trarão em si todo o código necessário para que o leitor possa reproduzi-los, salvo dito explicitamente o contrário. Vai ser comum, especialmente no começo, o leitor não entender por completo os códigos dos exemplos, <strong>mas o importante é que o leitor compreenda as partes do código referentes especificamente ao exemplo</strong>. Faço isso por dois motivos:(i) para que o leitor vá se acostumando aos poucos sem perceber com a sintaxe do R; e (ii) uma das coisas que me incomodou ao aprender é que é comum que sejam apresentados apenas pedaços de código e isso dificulta o entendimento de o que está sendo feito no geral.Será comentado todo o código apresentado para que o leitor entenda o que está sendo feito, mas com o foco sempre na parte referente ao exemplo. Pois, acredito que entendendo a “figura como um todo” é mais natutal compreender os detalhes</li>
</ul>
</div>
<div id="organizacao-do-livro" class="section level4 unnumbered">
<h4>Organização do livro</h4>
<ul>
<li>Descrever aqui a lógica da organização do livro e um resumo de o que cada capítulo ensina.</li>
<li>falar que a primeira parte busca apresentar as peças fundamentais para as outras partes, e por isso talvez seja um pouco mais chata. mas não desiste toda bonita residência começa com tijolos iguais.</li>
</ul>
</div>
<div id="organizacao-dos-capitulos" class="section level4 unnumbered">
<h4>Organização dos capítulos</h4>
<p>Cada capítulo apresenta aspectos expositivos sobre determinado tema, além disso no final de cada capítulo há uma seção com exercícios práticos com o intuito de reinterar o que foi mostrado na parte expositiva e acrescentar coisas que não foram mostradas explicitamente na parte expositiva. Também são apresentados exemplos práticos (que podem ser reproduzidos pelo leitor) ao longo da parte expositiva.</p>
</div>
</div>
<div id="sobre-o-autor" class="section level2 unnumbered">
<h2>Sobre o autor</h2>
</div>
<div id="agradecimentos" class="section level2 unnumbered">
<h2>Agradecimentos</h2>
<!--chapter:end:index.Rmd-->
</div>
</div>
<div id="part-introducao-ao-mundo-r" class="section level1 unnumbered">
<h1>(PART) Introdução ao Mundo R</h1>
</div>
<div id="r_e_rStudio" class="section level1">
<h1><span class="header-section-number">1</span> R e RStudio</h1>
<p>Neste capítulo vamos introduzir de maneira completa o R e o RStudio e apresentar o básico sobre seu funcionamento. De modo a facilitar o entendimento dos capítulos seguintes desta parte I do livro, que busca apresentar ferramentas sob as quais desenvolveremos nossas habilidades no R.</p>
<div id="o_que_sao" class="section level2">
<h2><span class="header-section-number">1.1</span> O que são</h2>
<p>R é uma linguagem de programação estatística baseada em comandos de linha, de modo que é dado ao usuário uma liberdade e flexilibidade na hora de fazer as análises. O RStudio é um ambiente de programação que torna mais fácil e eficiente a utilização do R. <span class="citation">Matloff (<a href="#ref-matloff2011">2011</a>)</span> apresenta a analogia de Greg Snow para exemplificar a lógica do R. Podemos pensar no mundo de análise dados como sendo uma cidade e as possíveis análises são diferentes locais nesta nossa cidade hipotética. Os principais meios de locomoção que pensamos são transporte público (ônibus, metrô, bondinho etc.) e transporte privado (em especial carros). Analisando as possilidades sabemos que andar de ônibus é mais fácil, basta pagar a passagem saber em qual ponto subir e em qual ponto descer. Já para poder utilizar o carro há um custo de aprender a dirigir o carro, ter um conhecimento de leis, e significados de placas, ter uma espécie de mapa mental para saber onde está indo (além do financeiro hehe) e etc. Mas e afinal de contas qual é a vantagem de se utilizar o transporte privado no lugar do público? É o simples fato de ser mais confortável e possibilitar você conseguir chegar em locais que o transporte público não te levaria sem uma boa caminhada. Destaco que a analogia foi feita antes de surgir aplicativos como UBER, e na minha interpretação andar de UBER seria como pagar alguém para fazer a análise por você.</p>
<p>O ponto é que utilizar pacotes estatíscos de botões (como SPSS, Gretl, Stata e afins) é como se você estivesse utilizando o transporte público, ao passo que ao introduzir ferramentas de programação (como o R e Python fazem, por exemplo) abre inúmeras possibilidades que são limitadas apenas pelo conhecimento do usuário. Deste modo você consegue chegar em lugares novos e chegar mais rápido em lugares que de outra maneira seria mais demorado.</p>
<p>Dito isso, o primeiro passo para entrarmos no mundo é baixar e instalar p O eo RStudio. Para baixar o R acesse o site do R Project (<a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a>), clique em <em>download R</em> e em seguida escolha um dos <em>mirrors</em> brasileiros, a figura @ref(fig:baixar-r) sintetizaos passos. O próximo passo é apenas executar o arquivo baixado.</p>
<div class="figure" style="text-align: center">
<img src="images/_baixar_r_1.png" alt="Baixando o R" width="683" />
<p class="caption">
(#fig:baixar-r)Baixando o R
</p>
</div>
<div class="figure" style="text-align: center">
<img src="images/_baixar_r_2.png" alt="Baixando o R" width="683" />
<p class="caption">
(#fig:baixar-r)Baixando o R
</p>
</div>
<p>Já o RStudio, como dito anteriormente, é um ambiente que torna a utilização da linguagem R mais agradavél e possibilita uma organização muito boa da análise que está sendo feita. Para baixar o RStudio acesse o site do RStudio (<a href="https://www.rstudio.com/" class="uri">https://www.rstudio.com/</a>), clique no icone <em>Download RSstudio</em>, em seguida clique em <em>Desktop Open Source License</em> e por fim basta executar o arquivo baixado, a figura @ref(fig:baixar-rstudio) sintetiza os passos.</p>
<div class="figure" style="text-align: center">
<img src="images/_baixar_rstudio_1.png" alt="Baixando o RStudio" width="683" />
<p class="caption">
(#fig:baixar-rstudio)Baixando o RStudio
</p>
</div>
<div class="figure" style="text-align: center">
<img src="images/_baixar_rstudio_2.png" alt="Baixando o RStudio" width="683" />
<p class="caption">
(#fig:baixar-rstudio)Baixando o RStudio
</p>
</div>
<p>É importante destacar que <strong>a ordem de instalação deve ser respeitada,isto é, primeiro instalr o R e depois o RStudio</strong>.</p>
</div>
<div id="layout_rstudio" class="section level2">
<h2><span class="header-section-number">1.2</span> <em>Layout</em> do RStudio</h2>
Depois de instalar o R e RStudio abra o RStudio, pois como comentado anteriorment o RStudio é um ambiente que torna mais eficiente a programação em R, e desse modo utilizaremos ele como interface para usar o R. Ao abrir o RStudio você deve se deparar com o <em>layout</em> apresentado na figura @ref(fig:layout-rstudio).
<div class="figure" style="text-align: center">
<img src="images/_layout_rstudio.png" alt="Layout do RStudio" width="683" />
<p class="caption">
(#fig:layout-rstudio)Layout do RStudio
</p>
</div>
<p>Esse <em>layout</em> apresenta 4 janelas principais para se usar o R no RStudio. De maneira sucinta:</p>
<ol style="list-style-type: decimal">
<li>A janela superior esquerda é o <em>script</em> que, como veremos em seguida, é onde o código é escrito para ser executado;</li>
<li>A janela superior direita, chamada de <em>environment</em>, e é onde encontram-se as variáveis, dados, e objetos;</li>
<li>A janela inferior esquerda é o <em>console</em> onde são exibidos os resultados que não são figuras, como tabelas, regressões, contas etc;</li>
<li>E por fim, a janela do canto inferior direito é onde são exibidos os plots produzidos.</li>
</ol>
</div>
<div id="scripts" class="section level2">
<h2><span class="header-section-number">1.3</span> <em>Scripts</em></h2>
<p>Outra grande vantagem de se utilizar linguagens baseadas em comandos de linha são os <em>scripts</em> que são onde ficam armazenados os comandos que devem ser executados, no caso do R os <em>scripts</em> são salvos na extensão <strong>.R</strong>. Os <em>scripts</em> desse modo são um conjunto de texto que serão interpretados pelo computador como “coisas” a serem feitas (como calcular uma média através do comando <code>mean()</code>), e esses textos chamaremos de sintaxe, pois é a maneira através da qual vamos nos comunicar com o computador. Os <em>scripts</em>, junto com variáveis e funções, possibilitam evitar a repetição mecânica dos comandos, um exemplo trivial para ilustrar o ponto é o cálculo da índice de massa corporal (IMC), podemos calcular comuma calculadora através da fórmula <span class="math display">\[IMC =\frac{peso(kg)}{altura(metros)^2}\]</span>. Para calcular o IMC dos membros de sua família você pode anotar o peso e altura de cada um e calcular individualmente, ou então você pode escrever o seguinte código:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>peso &lt;-<span class="st"> </span><span class="dv">65</span>
&gt;<span class="st"> </span>altura &lt;-<span class="st"> </span><span class="fl">1.75</span>
&gt;<span class="st"> </span>
<span class="er">&gt;</span><span class="st"> </span>IMC &lt;-<span class="st"> </span>peso/altura^<span class="dv">2</span>
&gt;<span class="st"> </span>IMC
<span class="co"># [1] 21.22449</span></code></pre></div>
<p>De modo que o que você precisa fazer é apenas mudar os valores do <code>peso</code> <code>altura</code> e executar o código novamente. Dois comandos são importantes você ter em mente sobre <em>scripts</em>: (i) Para abrir um novo <em>script</em> tem se usar o atalho <code>ctrl+shift+n</code>; e (ii) para salvar um <em>script</em> baste clicar no icone de disquete que aparece na aba embaixo de <em>untitled1</em> na figura @ref(fig:layout-rstudio).</p>
<p>Podemos dizer que os scripts substituiem os mouse e os botões por uma tela onde o usuário através dos comandos realiza suas análises da maneira mais livre possível.</p>
</div>
<div id="funcionamento_do_codigo" class="section level2">
<h2><span class="header-section-number">1.4</span> Funcionamento do Código</h2>
<p>É importante entender o funcionamento da execução do código do R. Chamamos de código o conjunto de comandos que estão salvos em um script, onde cada comando representa uma ação que pedimos para a linguagem executar. Comandos podem ser simples como calcular a média de uma vetor ou podem ser mais complexos como retornar uma mensagem caso no número seja par e outra caso o número seja impar.</p>
<p>O <em>chunk</em> abaixo mostra como seriam escritos os exemplos citados anteriror mente:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>## Calculando média de um vetor
<span class="er">&gt;</span><span class="st"> </span>vetor &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>)
&gt;<span class="st"> </span><span class="kw">mean</span>(vetor) 
&gt;<span class="st"> </span>
<span class="er">&gt;</span><span class="st"> </span>## Vendo se um número é impar ou par
<span class="er">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">13</span>
&gt;<span class="st"> </span>if(x %%<span class="st"> </span><span class="dv">2</span> ==<span class="st"> </span><span class="dv">0</span>){
+<span class="st">   </span><span class="kw">print</span>(<span class="st">&quot;x é par&quot;</span>)
+<span class="st"> </span>} else {
+<span class="st">   </span><span class="kw">print</span>(<span class="st">&quot;x é ímpar&quot;</span>)
+<span class="st"> </span>}</code></pre></div>
<p>O <em>chunk</em> possui ao todo 4 comandos, pois as linhas que começam com <code>#</code> são chamadas de comentários elas são executadas apenas como texto. O primeiro comando, <code>vetor &lt;- rnorm(10)</code>, cria um vetor com 10 números aleatório, o segundo, <code>mean(vetor)</code>, calcula a média dos elementos do vetor, o terceiro, <code>x &lt;- 3</code>, atribui à variável <code>x</code>o valor 3 e, por fim, o quarto comando, que começa no <code>if(x %% 2 == 0)</code>, testa de <code>x</code> é par e retorna uma mensagem caso ele seja par e outra caso <code>x</code> seja ímpar.</p>
<p>Para executar um comando utiliza-se o atalho no teclado <code>ctrl+Enter</code> e a linha em que você se encontra será executada, no caso dos três primeiros comandos é direto a execução com o atalho. Porém, se prestarmos atenção o quarto comando encontra-se “espalhado” em 5 linhas e aí reside um detalhe, note que sabemos que o comando tem mais de uma linha através do <code>+</code> que aparece nas três linhas subsequentes à primeira. O RStudio permite que você escolha entre duas opções de execução de comandos com mais de uma linha. A primeira opção é executar uma linha de cada vez, no nosso exemplo seria necessário utilizar o <code>ctrl+Enter</code> quatro vezes para executar o quarto comando. A segundo opção é fazer com que comandos com mais de uma linha sejam executados de uma só vez, neste caso para executar o quarto comando seria necessário utilizar p <code>ctrl+Enter</code> apenas na linha <code>if(x %% 2 ==0)</code> para executar o quarto comando. Independente de qual das opções foi utilizada para executar o código o resultado apóes executar os quatro comandos acima é apresentado na figura @ref(fig:resultados-4-comandos)</p>
<div class="figure" style="text-align: center">
<img src="images/_all_lines_one_statement_result.png" alt="Resultado" width="683" />
<p class="caption">
(#fig:resultados-4-comandos)Resultado
</p>
</div>
<p>Vemos que no console aparece o comando que foi executado, linhas que começam com <code>&gt;</code>, seguido pelo resultado do comando, linhas que começam com <code>[1]</code>, o que acontece nos bastidores é que ao executar um comando no <em>script</em> esse comando é “jogado” para o console onde ele é executado. Por fim, vemos que no <em>Environment</em> estão salvos o <code>vetor</code> e a variável <code>x</code>.</p>
<p>A escolha entre as duas maneiras de executar o código é uma escolha do usuário, pois o resultado final do código será o mesmo. Para optar pela execução de todas as linhas do comando de uma só vez acesse a aba <span class="math inline">\(Tools\Rightarrow Global\ Options\Rightarrow Code\)</span> e então marque a opção <em>Execute all lines in a statement</em><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, a figura @ref(fig:all-lines-one-statement) mostra o caminho completo.</p>
<div class="figure" style="text-align: center">
<img src="images/_all_lines_one_statement.png" alt="Opções de execução do código RStudio" width="683" />
<p class="caption">
(#fig:all-lines-one-statement)Opções de execução do código RStudio
</p>
</div>
<p>Um último detalhe para ae comentar sobre a execução dos códigos é que em boa parte dos comandos a execução do código é quase que instantanea, porém há situações em que o computador pode demorar para executar o código. Nessas situações é importante que você não execute nenhum outro comando enquanto o R não terminou de executar o comando anterior. Enquanto o R está executando um commando aparece uma “placa” no canto superior direito do console escrito <code>stop</code>, destacado na figura @ref(fig:installing-packages). Ao terminar de executar o código essa “placa” sumirá. Um exemplo de comando tende a demorar (relativamente) a ser executado é a estimação dos modelos de controle sintético apresentados por <span class="citation">Abadie, Diamond, and Hainmueller (<a href="#ref-abadie2010synthetic">2010</a>)</span>.</p>
<p>Passamos agora a discussão para entender onde o R “vive”, isto é, qual a maneira como o R interaje com o computador, no sentido de buscar arquivos para serem trabalhados dentro do R ou salvar resultados que foram obtidos no R.</p>
</div>
<div id="working_directory" class="section level2">
<h2><span class="header-section-number">1.5</span> <em>Working Directory</em> (ou pasta de trabalho)</h2>
<p>O jeito mais comum de se organizar um trabalho que envolva análise dados (seja projeto de pesquisa, trabalho da universidade etc.) é através de pastas no computador. É comum que os dados que serão analisados tenham de ser importados para dentro do R (<strong>colocar aqui referencia da seção</strong>), ou então que você queira salvar um plot que foi gerado dentro do R, o <em>working directory</em> nada mais é do que a pasta no seu computador onde o R vai buscar os arquivos para serem importados e salvar os resultados que serão exportados.</p>
<p>Há duas funções que você precisa conhecer no que tange à pasta de trabalho. A primeira é para definir a pasta de trabalho e chama-se <code>setwd()</code>, onde <code>wd</code> é abreviação de <em>working directory</em> o único argumento que essa função leva é o caminho da pasta entre aspas, como o exemplo abaixo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">setwd</span>(<span class="st">&quot;C:/Users/Vinicius/Desktop/working directory&quot;</span>)</code></pre></div>
<p>É importante notar que as barras são inclinadas para a direita e que o endereço começa no disco em que se encontra a página, pode parecer bobeiras, mas são erros comuns nos primeiros contato com o R. Para copiar o endereço de uma pasta basta clicar com o botão direito e selecionar a opção copiar, como se fosse qualquer outro arquivo, e depois colar denteo da função <code>setwd()</code>.</p>
<p>A segunda função importante para se saber é a <code>getwd()</code>, você consegue adivinhar o que ela faz? Isso mesmo, a função mostra para você qual é a pasta na qual o R está “vivendo” atualmente e ela não possui nenhum argumento. Por exemplo, este livro foi escrito dentro do RStudio e no momento o <em>working directory</em> é a pasta:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">getwd</span>()
<span class="co"># [1] &quot;C:/Users/Vinicius/Dropbox/projects/livro_r&quot;</span></code></pre></div>
<p>Na seção (<strong>colocar aqui seção de boas praticas script</strong>) iremos discutir boas práticas em relação ao <em>script</em> e <em>working directory</em>, mas vale a pena destacar adiantar uma boa prática. Como dito anteriormente é comum organizarmos nossos trabalhos acadêmicas em pastas, então suponhamos que estejamos fazendo um trabalho de econometria sobre o clássico exemplo de renda e consumo, estou assumindo que no nosso computador há uma pasta onde encontram-se os dados que o professor passou (ou você obteve), possíveis arquivos de texto e etc. É uma boa prática você criar dentro dessa pasta uma outra pasta e usá-la como <em>working directory</em>.</p>
</div>
<div id="pacotes" class="section level2">
<h2><span class="header-section-number">1.6</span> Pacotes (ou <em>libraries</em>)</h2>
<p>Em todas as esferas da análise de dados (importar dados, manipular dados, estimar modelos/testes estatísticos e reportar resultados) no R trabalha-se com funções que nos auxiliam, <code>setwd()</code> e <code>mean()</code> são duas funções já apresentadas. O R possui várias funções <em>built in</em>, isto é, que ao instalar o programa as funções já estão disponíveis. Um pacote neste contexto nada mais é do que um conjunto de funções sobre um tema parecido que não são carregadas autimaticamento ao abrir o RStudio. Por exemplo, no capítulo @ref(intrpducao_ao_ggplott2) vamos mostrar o básico do pacote ggplot2 que é um pacote desenvolvido para viasualização de dados e contém funções para histogramas, boxplots, gráficos de densidade 2d etc.</p>
<p>Para instalar um novo pacote utiliza-se a função <code>install.packages(&quot;nome do pacote&quot;)</code>, isso instala no seu computador as funções que estão no pacote, mas não as deixa disponíveis para utilização. Para fazer isso é necessário que você carrege as funções para o R através do comando <code>library(nome do pacote)</code>. Ao instalar um pacote uma aba com o progresso abrirá mostrando qual o status da instalação, como mostrado na figura @ref(fig:installing-packages).</p>
<div class="figure" style="text-align: center">
<img src="images/_install_packages.png" alt="Status de instalação de pacote" width="684" />
<p class="caption">
(#fig:installing-packages)Status de instalação de pacote
</p>
</div>
<p>Duas observações: (i) note que ao instalar o pacote o nome do pacote deve estar entre aspas e ao carregar o nome do pacote está sem aspas; (ii) **só é necessário instalar o pacote uma vez no seu computador (a primeira vez que você for utilizá-lo), mas é necessário que você carrege o pacote sempre que vocÊ abrir o R.</p>

<div class="exercise">
<span id="exr:unnamed-chunk-6" class="exercise"><strong>(#exr:unnamed-chunk-6) (Instalar o pacote tidyverse)  </strong></span>O pacote tidyverse será muito utilizado ao longo do livro e das suas atividades dentro do R. Esse pacote é na verdade um conjunto de pacotes que modernizaram e deixaram de maneia mais natural fazer as atividades relacionadas à analise de dados no R. Isto é, ele tem funções de manipulação de dados, visualização, estimação, programação etc. Seu exercício é instalar corretamente esse pacote.
</div>
<p></p>
<div id="pacotes-do-github" class="section level3 unnumbered">
<h3>Pacotes do GitHub</h3>
<p>Para fins deste livro podemos descrever o GitHub como uma “nuvem” (do mesmo jeito que o google drive, icloud etc.), mas para códigos de programação<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>. Desse modo é possível que pacotes para o R sejam criando e colocados a disposição para os usuários no GitHub. E neste caso a instalação do pacote é um pouco diferente.</p>
<p>Para instalar um pacoite que encontra-se no GitHub utiliza-se a função <code>install_github(&quot;usuario/pacote&quot;)</code>. onde <code>usuário</code> é o nome do usuário que fez o pacote no GitHub e <code>pacote</code> é o nome do pacote. Entretando a função <code>install_github</code> pertence ao pacote <code>devtools</code>. Ou seja, para instalar um pacote do GitHub você deve ter instalado no computador o pacote devtools, que é instalado como mostrado em @ref(pacotes).</p>

<div class="exercise">
<span id="exr:unnamed-chunk-7" class="exercise"><strong>(#exr:unnamed-chunk-7) (Pacote com dados usados no livro)  </strong></span>Os dados que serão utilizados nos exercícios e exemplos do livro estão disníveis em um pacote que encontra-se no GitHub, deste modo seu exercício agora é instalar e carreare o pacote devtools para poder ter acesso a função install_github. Em seguida baixe o pacote “DadosLivroR” do usuário “vinisousa04” com a função install_github.
</div>
<p></p>
<!--chapter:end:01-r-e-rstudio.Rmd-->
</div>
</div>
</div>
<div id="primeiros-comandos-no-R" class="section level1">
<h1><span class="header-section-number">2</span> Primeiros Comandos no R</h1>
<p>Agora que apresentamos o R e RStudio e o básico sobre seu funcionamento, vamos começar nossa aventura dentro das linhas de comando do R apresentando…</p>
<p>Neste capitulo usaremos os os pacotes</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(tidyverse)
&gt;<span class="st"> </span><span class="kw">library</span>(DadosLivroR)</code></pre></div>
<div id="r-como-calculadora" class="section level2">
<h2><span class="header-section-number">2.1</span> R como calculadora</h2>
<p>A utilização mais trivial que se pode fazer do R é como uma calculadora. Onde podemos fazer operações “comuns”, como soma, multiplicação, exponenciação e etc. A execução das operações comuns é muito intuitiva, se quisermos somar números utilizamos o símbolo <code>+</code>, dividir usamos <code>/</code>, exponenciação usamos <code>^</code>. Porém há outros tipos de operações<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> que podemos fazer que isoladamente são simples, mas que são muito úteis no processo de análise de dados.</p>
<p>O primeiro tipo é o que chamamos de testes de igualdade. São operações que testam se duas variáveis são iguais, se uma é menor ou maior que a outra. Diferente das operações comuns que retornam valores númericos, essa operações retornam valores lógicos de <code>TRUE</code> para verdadeiro e <code>FALSE</code> para falso, valores lógicos são apresentados devidamente na seção @ref(tipos_de_dados). Então ao executar o comando <code>2 == 3</code> o resultado exibido será <code>FALSE</code> e ao executar o comando <code>2 &lt;= 3</code> retornará um resultado <code>TRUE</code>, pois é claro que 2 não é igual a 3 e é menor que 3. Como pode se verificar abaixo</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="dv">2</span>==<span class="dv">3</span>
<span class="co"># [1] FALSE</span>
&gt;<span class="st"> </span><span class="dv">2</span>&lt;=<span class="dv">3</span>
<span class="co"># [1] TRUE</span></code></pre></div>
<p>Isso pode parecer bobo, mas toda a estatística que tradicionalmente se aprende em um curso de graduação<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a> é baseado em testes de hipótese que em termos práticos é verificar se o p valor de uma estatística é menor do que <span class="math inline">\(1-nível\ de\ significância\ escolhido\)</span><a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>. Ou seja, podemos automatizar decisões através de testes de igualdade.</p>
<p>O outro tipo de operação é chamada de connectivos/operadores lógicos. Da mesma maneira que os testes de igualdade os operadores lógicos retornam valores <code>TRUE</code>ou <code>FALSE</code>. Há três operadores importantissímos, são eles o <code>E</code> que retorna <code>TRUE</code> caso as duas condições sejam verdadeiras e <code>FALSE</code> caso contrário. O <code>OU</code> que retorna <code>TRUE</code> caso uma das duas condições seja verdadeira e <code>FALSE</code> caso contrário. E o <code>negação</code> que retorna <code>TRUE</code> caso a condição seja falsa e <code>FALSE</code> caso a condição seja verdadeira. É importante parar um pouco e refletir sobre o que isso significa para ter certeza que você entendeu, e para ajudá-lo a compreendeer e mostrar os símbolos dos operados no R vamos analisar um exemplo detalhado. A tabela @ref(tab:calculadora-r) traz resumidamente os principais operadores do R.</p>
<table>
<caption>(#tab:calculadora-r)Principais Operadores do R</caption>
<thead>
<tr class="header">
<th align="left">Operação</th>
<th align="left">Descrição</th>
<th align="left">Resultado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">x + y</td>
<td align="left">Soma y ao x</td>
<td align="left">Número</td>
</tr>
<tr class="even">
<td align="left">x - y</td>
<td align="left">Subtrai y de x</td>
<td align="left">Número</td>
</tr>
<tr class="odd">
<td align="left">x * y</td>
<td align="left">Multiplica x, y vezes</td>
<td align="left">Número</td>
</tr>
<tr class="even">
<td align="left">x / y</td>
<td align="left">Divide x por y</td>
<td align="left">Número</td>
</tr>
<tr class="odd">
<td align="left">x ^ y</td>
<td align="left">Eleva x à y potência</td>
<td align="left">Número</td>
</tr>
<tr class="even">
<td align="left">x == y</td>
<td align="left">Testa se y é igual a x</td>
<td align="left">TRUE/FALSE</td>
</tr>
<tr class="odd">
<td align="left">x &lt;= y</td>
<td align="left">Testa se y é menor ou igual a x</td>
<td align="left">TRUE/FALSE</td>
</tr>
<tr class="even">
<td align="left">x &gt;= y</td>
<td align="left">Testa de y é maior ou igual a x</td>
<td align="left">TRUE/FALSE</td>
</tr>
<tr class="odd">
<td align="left">x &amp; y</td>
<td align="left">Operador lógico ‘E’</td>
<td align="left">TRUE/FALSE</td>
</tr>
<tr class="even">
<td align="left">x | y</td>
<td align="left">Operador lógico ‘OU’</td>
<td align="left">TRUE/FALSE</td>
</tr>
<tr class="odd">
<td align="left">!x</td>
<td align="left">Operador lógico de negação</td>
<td align="left">TRUE/FALSE</td>
</tr>
</tbody>
</table>

<div class="example">
<p><span id="exm:OperadorLogico" class="example"><strong>(#exm:OperadorLogico) (Utilização dos operadores de teste e lógicos)  </strong></span> O principal objetivo deste exemplo é mostrar uma aplicação de como os operadores de teste e lógicos são usados no precessso dentro do R para facilitar o processo de análise de dados. A motivação do exemplo será mostrar comparar a percepção da corrupção na América Latina e Caribe com a percepção de corrupção na África Subsahariana. Espeficicamente vamos usar o índice de percepção de corrupção para os anos de 2006 a 2015, sem os anos de 2007 e 2009 para verificar se a percepção de corrupção na América latina é maior ou menor do que na África e verificar se há algum comportamente em comum ao longo do tempo nas médias de percepção de corrupção. O índice de percepção de corrupção varia entre 0 e 100 e quanto mais próximo de 100 menor é a percepção de corrupção.</p>
O exemplo pode ser desmontado nos seguintes passos: (i) carregar pacotes; (ii) Selecionar dados; (iii) Filtrar os dados; (iv) Criar variaveis que queremos; e (v) Ver os resultados
</div>
<p></p>
<p>Vamos carregar os pacotes que usaremos:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(tidyverse)
&gt;<span class="st"> </span><span class="kw">library</span>(DadosLivroR)</code></pre></div>
<p>Agora vamos selecionar o data set chamada <code>data_set1</code> do pacote <code>DadosLivroR</code> e visualizar o início dele. Para obter uma descrição do data set digite <code>?data_set1</code> no console. Ainda não apresentamos a função <code>&lt;-</code>, mas a grosso modo sempre que você se deparar com <code>x &lt;- 2</code> leia como “x recebe 2”, onde vamos chamar o que estiver o lado esquerdo do <code>&lt;-</code> de “objeto daqui para frente. No caso do <em>chunk</em> abaixo seria”dados recebe data_set1“, desse modo você pode usar o data_set1 sempre que precisar chamando o objeto <code>dados</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="co"># pegando os dados</span>
<span class="er">&gt;</span><span class="st"> </span>dados &lt;-<span class="st"> </span>data_set1
&gt;<span class="st"> </span>
<span class="er">&gt;</span><span class="st"> </span><span class="kw">head</span>(dados)
<span class="co"># # A tibble: 6 x 9</span>
<span class="co">#          Pais     Regiao   Ano PerCap_dolar PerCap_growth   Inflacao</span>
<span class="co">#         &lt;chr&gt;      &lt;chr&gt; &lt;int&gt;        &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co"># 1 Afghanistan South Asia  2006     397.9859      2.200613  7.2548956</span>
<span class="co"># 2 Afghanistan South Asia  2008     444.9501      1.040489 30.5549406</span>
<span class="co"># 3 Afghanistan South Asia  2010     553.3003      5.425968  0.8925369</span>
<span class="co"># 4 Afghanistan South Asia  2011     569.2334      2.879648 10.2016601</span>
<span class="co"># 5 Afghanistan South Asia  2012     630.4274     10.750252  7.2182578</span>
<span class="co"># 6 Afghanistan South Asia  2013     621.8181     -1.365634  7.6543166</span>
<span class="co"># # ... with 3 more variables: CPI &lt;dbl&gt;, PFI &lt;dbl&gt;, DI &lt;dbl&gt;</span></code></pre></div>
<p>Em seguida vamos <strong>filtrar</strong> os dados e selecionar as variaveis que iremos trabalhar. Vamos selecionar as regiões da américa latina e África subsahariana e as variaveis relacionadas à região, ao ano e CPI que é índice de percepção de corrupção. O código abaixo faz isso:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>filtrado &lt;-<span class="st"> </span>dados %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">filter</span>(Regiao ==<span class="st"> &quot;Latin America &amp; Caribbean&quot;</span> |<span class="st"> </span>Regiao ==<span class="st"> &quot;Sub-Saharan Africa&quot;</span>) %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">select</span>(Regiao, Ano, CPI)</code></pre></div>
<p>Onde tiver <code>%&gt;%</code> leia “então”. Deste modo o <em>chunk</em> acima está fazendo o seguite: pegando o objeto dados, então filtrando a coluna Regiao para valores que sejam iguais à “Latin America &amp; Caribbean” <strong>OU</strong> iguais à “Sub-Saharan Africa”, então selecionando as colunas com o nome de Regiao, Ano e CPI e salvando o resultado em um objeto chamado <code>filtrado</code>. Veja que aqui utilizamos o operador lógico OU para fazer o filtro, <code>filter(Regiao == &quot;Latin America &amp; Caribbean&quot; | Regiao == &quot;Sub-Saharan Africa&quot;)</code>!</p>
<p>Antes de prosseguirmos, vamos verificar o data frame filtrado:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>filtrado
<span class="co"># # A tibble: 496 x 3</span>
<span class="co">#                       Regiao   Ano      CPI</span>
<span class="co">#                        &lt;chr&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#  1        Sub-Saharan Africa  2006 22.00000</span>
<span class="co">#  2        Sub-Saharan Africa  2008 19.00000</span>
<span class="co">#  3        Sub-Saharan Africa  2010 19.00000</span>
<span class="co">#  4        Sub-Saharan Africa  2011 20.05035</span>
<span class="co">#  5        Sub-Saharan Africa  2012 22.00000</span>
<span class="co">#  6        Sub-Saharan Africa  2013 23.00000</span>
<span class="co">#  7        Sub-Saharan Africa  2014 19.00000</span>
<span class="co">#  8        Sub-Saharan Africa  2015 15.00000</span>
<span class="co">#  9 Latin America &amp; Caribbean  2006 29.00000</span>
<span class="co"># 10 Latin America &amp; Caribbean  2008 29.00000</span>
<span class="co"># # ... with 486 more rows</span></code></pre></div>
<p>Vemos que temos o que queremos. Agora basta calcularmos as médias de cada ano para cada uma das regiões e depois a média geral de cada grupo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>resultado &lt;-<span class="st"> </span>filtrado %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">group_by</span>(Ano, Regiao) %&gt;%<span class="st"> </span><span class="co"># agrupando por Ano e Regiao</span>
+<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">media_ano =</span> <span class="kw">mean</span>(CPI,<span class="dt">na.rm =</span> T)) %&gt;%<span class="st"> </span><span class="co"># Calculando media</span>
+<span class="st">   </span><span class="kw">group_by</span>(Regiao) %&gt;%<span class="st"> </span><span class="co"># Agrupando por regiao</span>
+<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">media_periodo =</span> <span class="kw">mean</span>(media_ano), <span class="co"># criando media por ano</span>
+<span class="st">                       `</span><span class="dt">menor que periodo</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(media_ano &lt;=<span class="st"> </span>media_periodo, <span class="st">&quot;sim&quot;</span>, <span class="st">&quot;Não&quot;</span>))</code></pre></div>
<p>Que resulta no seguinte:</p>
<table>
<thead>
<tr class="header">
<th align="right">Ano</th>
<th align="left">Regiao</th>
<th align="right">media_ano</th>
<th align="right">media_periodo</th>
<th align="left">menor que periodo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2006</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">33.20833</td>
<td align="right">35.59501</td>
<td align="left">sim</td>
</tr>
<tr class="even">
<td align="right">2006</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">28.31429</td>
<td align="right">30.70347</td>
<td align="left">sim</td>
</tr>
<tr class="odd">
<td align="right">2008</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">34.45833</td>
<td align="right">35.59501</td>
<td align="left">sim</td>
</tr>
<tr class="even">
<td align="right">2008</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">28.57895</td>
<td align="right">30.70347</td>
<td align="left">sim</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">34.52174</td>
<td align="right">35.59501</td>
<td align="left">sim</td>
</tr>
<tr class="even">
<td align="right">2010</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">28.42105</td>
<td align="right">30.70347</td>
<td align="left">sim</td>
</tr>
<tr class="odd">
<td align="right">2011</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">33.44666</td>
<td align="right">35.59501</td>
<td align="left">sim</td>
</tr>
<tr class="even">
<td align="right">2011</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">29.01819</td>
<td align="right">30.70347</td>
<td align="left">sim</td>
</tr>
<tr class="odd">
<td align="right">2012</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">37.54167</td>
<td align="right">35.59501</td>
<td align="left">Não</td>
</tr>
<tr class="even">
<td align="right">2012</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">33.21053</td>
<td align="right">30.70347</td>
<td align="left">Não</td>
</tr>
<tr class="odd">
<td align="right">2013</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">36.79167</td>
<td align="right">35.59501</td>
<td align="left">Não</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">32.44737</td>
<td align="right">30.70347</td>
<td align="left">Não</td>
</tr>
<tr class="odd">
<td align="right">2014</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">37.58333</td>
<td align="right">35.59501</td>
<td align="left">Não</td>
</tr>
<tr class="even">
<td align="right">2014</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">33.05405</td>
<td align="right">30.70347</td>
<td align="left">Não</td>
</tr>
<tr class="odd">
<td align="right">2015</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">37.20833</td>
<td align="right">35.59501</td>
<td align="left">Não</td>
</tr>
<tr class="even">
<td align="right">2015</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">32.58333</td>
<td align="right">30.70347</td>
<td align="left">Não</td>
</tr>
</tbody>
</table>
<p>Neste último <em>chunk</em> pegamos o objeto <code>filtrado</code>, então agrupamos por Ano e Regiao, então calculamos a média do CPI (índice de percepção de corrupção), então agrupamos por Regiao, então adicionames duas variáveis: (i) media_periodo que tem a média do CPI para todo o período de cada região; e (ii) menor do que período que diz se a média no ano específico é menor ou não do que a média geral. E perceba que na última linha usamos o teste de igualdade para computar o valor da última variável,<code>if_else(media_ano &lt;= media_periodo, &quot;sim&quot;, &quot;Não&quot;)</code>, o que essa linha fez comparar linha por linha se o valor da coluna “media_ano” é menor que o o valor “media_periodo” e caso o valor fosse menor então a coluna “menor que periodo” recebia o valor “sim” na respectiva linha, caso não fosse recebia o valor “não”!</p>
<p>Não se preocupe em entender os detalhes do código, pois cada uma das ferramentas utilizadas serão propriamente apresentadas no decorrer do livro. O importante é que tenha ficado claro como os operados de teste e lógicos são utilizados. Outra coisa, pode parecer que é muito código, em um script seria apenas algo do tipo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(DadosLivroR)
&gt;<span class="st"> </span><span class="kw">library</span>(tidyverse)
&gt;<span class="st"> </span>
<span class="er">&gt;</span><span class="st"> </span><span class="co"># Pegar dados</span>
<span class="er">&gt;</span><span class="st"> </span>
<span class="er">&gt;</span><span class="st"> </span>dados &lt;-<span class="st"> </span>data_set1
&gt;<span class="st"> </span>
<span class="er">&gt;</span><span class="st"> </span>resultado &lt;-<span class="st"> </span>dados %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">filter</span>(Regiao ==<span class="st"> &quot;Latin America &amp; Caribbean&quot;</span> |<span class="st"> </span>Regiao ==<span class="st"> &quot;Sub-Saharan Africa&quot;</span>) %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">select</span>(Regiao, Ano, CPI) %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">group_by</span>(Ano, Regiao) %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">media_ano =</span> <span class="kw">mean</span>(CPI,<span class="dt">na.rm =</span> T)) %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">group_by</span>(Regiao) %&gt;%<span class="st"> </span>
+<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">media_periodo =</span> <span class="kw">mean</span>(media_ano), 
+<span class="st">                       `</span><span class="dt">menor quegeral</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(media_ano &lt;=<span class="st"> </span>media_periodo, <span class="st">&quot;sim&quot;</span>, <span class="st">&quot;Não&quot;</span>))</code></pre></div>
<p>Vamos agora apresentar para o usuário como acessar os dados e variáveis que o leitor importa para o R.</p>
</div>
<div id="Workspace-Environment" class="section level2">
<h2><span class="header-section-number">2.2</span> <em>Workspace/Environment</em></h2>
<p>Para entendermos o que é o <em>Workspace/Environment</em> vamos antes apresentar oficialmente o operador de atribuição <code>&lt;-</code>. A utilizaçãp desse operador da-se da seguinte maneira <code>nome &lt;- objeto</code>, onde <code>nome</code> é nome do <code>objeto</code><a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a> que você quer salvar. Se olharmos o exemplo @ref(exm:OperadorLogico) vemos que utilizamos o operador de atribuição três vezes para salvar os objetos <code>dados</code>, <code>filtrado</code> e <code>resultado</code>, ou seja nesse caso nossos objetos são data sets, mas poderiam ser várias outras coisas, como vetores, resultados de regressão, gráfico e etc. Se olharmos o <em>Workspace/Environment</em> depois de executar o código do exemplo teremos algo como mostra a @ref(fig:workspace-environment). Veja que temos nossos três objetos disponíveis para quando quisermos utiliza-los.</p>
<div class="figure" style="text-align: center">
<img src="images/_workingspace.png" alt="Exemplo de workspace/Environment" width="683" />
<p class="caption">
(#fig:workspace-environment)Exemplo de workspace/Environment
</p>
</div>
<p>Ao clicar com o botão esquerdo do mouse nas janelinhas no final da linha com o nome do objeto é aberta uma nova aba dentro do RStudio mostrando os dados. Veja a figura @ref(fig:aba-com-dados).</p>
<div class="figure" style="text-align: center">
<img src="images/_aba_com_dados.png" alt="Vendo dados no RStudio" width="683" />
<p class="caption">
(#fig:aba-com-dados)Vendo dados no RStudio
</p>
</div>
</div>
<div id="funcoes" class="section level2">
<h2><span class="header-section-number">2.3</span> Funções</h2>
<p>De maneira simples uma função é um meio de se automatizar uma sequência de comandos. Isso é feito através de <em>inputs</em> (ou argumentos) e <em>outputs</em>, onde os <em>inputs</em> são valores que o usuário fornece à função e os <em>outpus</em> são os valores retornados pela função, a sintaxe geral de uma função é <code>noma_da_função(argumentos)</code>. Um exemplo trivial é a função <code>mean()</code> que calcula a média de um determinado conjunto de número. Qual são os comandos que essa função automatiza? (i) somar cada elemento do conjunto, (ii) contar quantos elementos tem o conjunto e (iii) dividir a soma pelo númere de elementos. Desse modo, calcularíamos amédia da sequência 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 da sequinte maneira:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">mean</span>(<span class="dv">1</span>:<span class="dv">10</span>)
<span class="co"># [1] 5.5</span></code></pre></div>
<p>Neste caso o <em>input</em> foi a sequência de números 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 e o <em>output</em> foi o número 5.5. Este é um exemplo trivial que funciona para mostrar como as funções funcionam, entretanto deve se ter claro em mente que há funções para desempenhar uma grande variedade de comandos dos mais simples, como calcular média, à complexos como estimar modelos de controle sintético<a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a>.</p>
<p>Ao abrir o RStudio várias funções são carregadas automaticamente, vamos chamar essas funções de funções <em>built-in</em>, porém uma das vantagens de <em>softwares</em> estatísticos gratuitos é que qualquer pessoa pode escrever funções e torna-las disponíveis através de pacotes. Como vimos na seção @ref(pacotes) utilizamos o comando <code>library()</code> para carregar algum pacote e ao carregar um pacote estamos basicamente tornando disponível um conjunto de funções e dados para utilizarmos. Então, ao carregar o pacote <code>DadosLivroR</code> fizemos o <em>data set</em> <code>data_set1</code> disponível para utilização e ao carregar o pacote <code>tidyverse</code> tornamos a funções <code>filter()</code> disponível para usarmos. Destacamos aqui para os alunos de economia que nos últimos anos tem sido desenvolcidos pacotes que com funções que permitem acessar as principais fontes de dados econômicos do Brasil, como o sistema gerenciador de séries temporais do banco central, IBGE, SIDRA, FGV etc. Tais pacotes e funções serão apresentados na seção @ref(dados-economia-brasileira).</p>
<p>Ao longo do livro o leitor será exposto a várias funções que executam comandos relacionados à todos os campos da análise de dados e conforme o leitor for utilizando o R o conhecimento das funções vai sendo acumulado e tornando cada vez mais eficiente a utilização do R como ferramente de análise de dados.</p>
</div>
<div id="ajuda-e-documentacao" class="section level2">
<h2><span class="header-section-number">2.4</span> Ajuda e documentação</h2>
<p>Até este ponto do livro apenas mostramos situações nas quais os comandos foram executados sem que houvesse nenhum erro, mas essa nem sempre será o caso quando o leitor estiver usando o R. É claro que não vamos escrever um código que contenha erros de propósito, porém você irá escrever códigos com erros e saber como lidar com os erros é uma das habilidades essenciais para se utilizar o R de maneira eficiente. <em>…saber como lidar com os erros é uma das habilidades essenciais…</em> pode parecer frase auto ajuda, mas no caso do R quando nos referimos a <em>saber como lidar com os erros</em> estamos querendo dizer que devemos encontrar o erro, diagnosticar e resolve-lo.</p>
<p>Há uma infidade de possíveis erros que podem acontecer de modo que qualquer tentativa de uma solução geral é completamente inútel, o que vamos buscar fazer aqui é apresentar o “como” ocorrem os erros de modo que, entendo a maneira pela qual ele ocorre, fica mais fácil buscar as soluções. Outra coisa importante de se ter em mente é que entender um pouco de inglês ajuda (e muito) na hora de procurar ajuda e ler a dicumentação de qualquer linguagem de programação, e o R não foge disso. Por isso, algumas partes dessa sessão terão conteúdo em inglês (conforme o usuátio encontraria na internet).</p>
<div id="erros-mensagens-e-avisos" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Erros, Mensagens e Avisos</h3>
<div id="erros" class="section level4 unnumbered">
<h4>Erros</h4>
<p>Ao executar um comando que contenha algum erro de sintaxe aparecerá no console do RStudio uma mensagem de erro e o leitor deve considerar essa mensagem como sendo o primeiro lugar para se procurar ajuda, pois em boa parte dos casos a mensagem explicará de maneira compreensível qual foi o erro. O <em>chunk</em> abaixo mostra isso:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> &quot;tres&quot;</span> +<span class="st"> </span><span class="dv">2</span>
<span class="co"># Error in &quot;tres&quot; + 2: non-numeric argument to binary operator</span></code></pre></div>
<p>Ao tentar somar um pedaço de texto com um número o R retorna a mensagem <code>Error in &quot;tres&quot; + 2 : non-numeric argument to binary operator</code>. A operação de soma só funciona com valores númericos no R, de modo que ao executar o comando o R percebeu que um dos valores da operação binária<a href="#fn8" class="footnoteRef" id="fnref8"><sup>8</sup></a> era um pedaço de texto e então retornou o erro.</p>
<p>infelizmente não será sempre que vamos descobrir qual é o erro através das mensagens de erro, veja por exemplo ao tentar carregar para dentro do R a série história do IPCA (Índice Nacional de Preços ao Consumidor Amplo) do Sistema Gerenciador de Séries Temporais do Banco Central podemos nos deparar com o seguinte resultado</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(rbcb) <span class="co"># carregando o pacote com a função get_series</span>
&gt;<span class="st"> </span><span class="kw">get_series</span>(<span class="dt">code =</span> <span class="dv">433</span>)
<span class="co"># Error in curl::curl_fetch_memory(url, handle = handle): Couldn&#39;t resolve host name</span></code></pre></div>
<p>Algo que pode ser feito é copiar e colar a mesangem de erro no em alguma ferramenta de busca (isso o google). Ao colar essa mensagem de erro no google um dos links que aparece é este <a href="https://support.rstudio.com/hc/en-us/community/posts/115000629548-Error-in-CURL" class="uri">https://support.rstudio.com/hc/en-us/community/posts/115000629548-Error-in-CURL</a>, que no final da página tem como resposta dizendo que essa mensagem de erro está relacionada a problemas de conectividade com a internet.</p>
<p>Neste momento que entra a importância do inglês, pois há diversas comunidades de perguntas e repostas sobre erros do R, grande parte delas em inglês e ao utilizar esse meio de resolver os problemas o usuário irá com o passar do tempo verificando qual é a sua comunidade favorita.</p>
</div>
<div id="mensagens" class="section level4">
<h4><span class="header-section-number">2.4.1.1</span> Mensagens</h4>
<p>falar primeiro da documentação e depois dos erros e mensagens em subseções diferentes</p>
<p>tópicos para incluir</p>
<ul>
<li>usar “?” para ver documentação</li>
<li>função example para ver como a função funciona</li>
<li>“a duvida que você tem, não só alguém já teve, como alguem já postou na internet e outro alguém já respondeu”</li>
<li>explicar em detalhes a diferença entre erro, warning e message que sai no console e como devemos ler para que possamos entender o que está acontecendo</li>
</ul>
<!--chapter:end:02-primeiros-comandos-no-r.Rmd-->
</div>
</div>
</div>
</div>
<div id="estruturas_de_dados" class="section level1">
<h1><span class="header-section-number">3</span> Estruturas de Dados</h1>
<p>Neste capítulo vamos apresentar ao leitor os tipos de dados e estruturas de dados fundamentais do R. Nota-se que não são apresentados todos os tipos e estruturas de dados, entretanto garantimos que os aqui apresentados serão o suficiente para resolver quase todos (se não todos) os problemas e aplicações que o leitor se deparar com. Também ressalvamos que talvez esse capítulo seja o mais importante desta parte do livro, pois um bom entendimento sobre os tipos de informações e como elas são armazenadas (dentro do R) é essencial para o desenvolvimento de habilidades para lidar com dados. Ressaltamos que o objetivo deste capítulo é fazer com o que leitor saiba “quais são e como são”&quot; as estruturas de dados, pois as ferramentas de “como trabalhar” com as estruturas de dados serão apresentadas ao longo do livro.</p>
<p>Sem mais delongas os tipo de dados são como uma determinada informação pode ser registrada e já as estruturas de dados são como as informações são armazenadas de modo que possam ser utilizadas, um pouco abstrata essa explicação até agora não acham? Bem, uma analogia que pode ajudar a compreender a <strong>diferença entre tipos de dados e estruturas de dados</strong> é a seguinte: Acredito que seja familiar a todos o final do filme Toy Story (o primeiro da trilogia), quando o Woody e o Buzz perdem o caminhão da mudança contratado pela Mãe do Andy (digo mãe e não família pois o Pai do Andy é um mistério). Bem se recordarmos bem alguns brinquedos o Andy trouxe com ele dentro do carro (em especial teria trazido o Woody e o Buzz) e ao mesmo tempo outro brinquedos estavam sendo transportados no caminhão. Onde eu quero chegar com isso? Os brinquedos seriam um tipo de informação (no caso de uma mudança poderíamos pensar que as roupas seriam outro tipo de informação) e o caminhão da transportadora e o carro da mão do Andy seriam as diferentes estruturas nas quais é possível carregar os dados.</p>
<p>Com a diferença entre tipos e estruturas de dados explicada vamos agora apresentar ao leitor explicitamente o funcionamento de tais coisas no R. Começamos apresentando os tipos de dados e em seguida as estrutura.</p>
<div id="tipos_de_dados" class="section level2">
<h2><span class="header-section-number">3.1</span> Tipos de dados</h2>
<p>Para apresentar os diferentes tipos de como as informações podem ser armazenadas vamos utilizar uma base fictícia de empregados apresentada na tabela @ref(tab:empregados). Nela temos 6 colunas representando diferentes variáveis.</p>
<table>
<caption>(#tab:empregados)Empregados</caption>
<thead>
<tr class="header">
<th align="left">Nome</th>
<th align="right">Tempo_emprego</th>
<th align="left">Setor</th>
<th align="right">Peso</th>
<th align="left">Nascimento</th>
<th align="left">Casado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Mia</td>
<td align="right">1</td>
<td align="left">Financeiro</td>
<td align="right">40.37</td>
<td align="left">1999-06-23</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">William</td>
<td align="right">2</td>
<td align="left">Financeiro</td>
<td align="right">44.75</td>
<td align="left">1999-11-07</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">Gregory</td>
<td align="right">3</td>
<td align="left">Estrutura</td>
<td align="right">38.40</td>
<td align="left">1999-10-01</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">Amanda</td>
<td align="right">4</td>
<td align="left">Estrutura</td>
<td align="right">32.65</td>
<td align="left">1999-03-30</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">Mahmood</td>
<td align="right">5</td>
<td align="left">Marketing</td>
<td align="right">36.13</td>
<td align="left">1999-01-21</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">Abigail</td>
<td align="right">6</td>
<td align="left">Marketing</td>
<td align="right">40.85</td>
<td align="left">1999-10-14</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">Tasina</td>
<td align="right">7</td>
<td align="left">Marketing</td>
<td align="right">40.18</td>
<td align="left">1999-06-01</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">Julian</td>
<td align="right">8</td>
<td align="left">Estrutura</td>
<td align="right">41.39</td>
<td align="left">1999-04-12</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">Devika</td>
<td align="right">9</td>
<td align="left">Estrutura</td>
<td align="right">44.03</td>
<td align="left">1999-12-30</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">Nicholas</td>
<td align="right">10</td>
<td align="left">Estrutura</td>
<td align="right">39.43</td>
<td align="left">1999-04-14</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
<p>Cada coluna possui um tipo diferente de informação e cada informação é armazenada de um jeito diferente. A lista abaixo sintetiza os tipos de dados e a coluna da tabela com a qual ela está relacionada<a href="#fn9" class="footnoteRef" id="fnref9"><sup>9</sup></a>.</p>
<ul>
<li>Character (ou string): São caracteres textuais que podem assumir qualquer valor. Na tabela é a coluna relaciona ao Nome. Os elementos dos vetores de caracteres devem estar entre aspas <code>&quot;elemento&quot;</code>;</li>
<li>Integer: São números inteiros, neste caso relacionado com a coluna idade;</li>
<li>Double: São números decimais, neste caso relacionado à coluna de peso;</li>
<li>Factor: São caracteres textuais mais podem assumir somente um determinado tipo de valor. Neste caso seria a coluna que traz o setor no qual o empregado trabalha. Outro exemplo de factor seria o tipo sanguíneo em um banco de dados de pacientes;</li>
<li>Dates: São valores textuais que são interpretados como datas, neste caso relacionado à coluna nascimento;</li>
<li>Logical: Assumem o valor <code>TRUE</code> ou <code>FALSE</code>, também chamados de valores booleanos.</li>
</ul>
<p>A função <code>str()</code> permite verificar a estrutura dos nossos objetos, o chunk abaixo mostra a utilização da função na nossa base de dados de empregados</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">str</span>(empregados)
<span class="co"># &#39;data.frame&#39;: 10 obs. of  6 variables:</span>
<span class="co">#  $ Nome         : chr  &quot;Mia&quot; &quot;William&quot; &quot;Gregory&quot; &quot;Amanda&quot; ...</span>
<span class="co">#  $ Tempo_emprego: int  1 2 3 4 5 6 7 8 9 10</span>
<span class="co">#  $ Setor        : Factor w/ 3 levels &quot;Estrutura&quot;,&quot;Financeiro&quot;,..: 2 2 1 1 3 3 3 1 1 1</span>
<span class="co">#  $ Peso         : num  40.4 44.8 38.4 32.7 36.1 ...</span>
<span class="co">#  $ Nascimento   : Date, format: &quot;1999-06-23&quot; &quot;1999-11-07&quot; ...</span>
<span class="co">#  $ Casado       : logi  TRUE TRUE FALSE TRUE FALSE FALSE ...</span></code></pre></div>
<p>Seguindo na nossa analogia da mudança as estruturas de dados seriam os meios através dos quais podemos transportar os objetos de uma casa para outro, como carros, caminhões etc. Deste modo, nesta seção vamos apresenta ao leitor o que são e exemplos de como construir: (i) Vetores, (ii) Matrizes, (iii) Data frames e (iv) Listas</p>
</div>
<div id="vetores" class="section level2">
<h2><span class="header-section-number">3.2</span> Vetores</h2>
<p>É a estrutura mais básica (e fundamental) do R. De maneira objetiva um <strong>vetor é uma sequência de elementos do mesmo tipo</strong>. Agora vamos introduzir aqui 4 aspectos importantes sobre vetores.</p>
<div id="criando-vetores" class="section level3 unnumbered">
<h3>Criando Vetores</h3>
<p>Há diversas maneiras de se criar vetores e a sua imaginação é de fato o limite, porém há jeitos mais triviais que são muito utilizados. Dois destes triviais são através da função concatenar, <code>c()</code>, e a função sequência, <code>seq()</code>. O chunk abaixo ilustra maneiras diferentes de se criar a sequência 1, 2, 3, 4, 5, 6, 7, 8, 9, 10.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>)
<span class="co">#  [1]  1  2  3  4  5  6  7  8  9 10</span>
&gt;<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">10</span>)
<span class="co">#  [1]  1  2  3  4  5  6  7  8  9 10</span>
&gt;<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">10</span>, <span class="dt">by=</span><span class="dv">1</span>)
<span class="co">#  [1]  1  2  3  4  5  6  7  8  9 10</span>
&gt;<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">10</span>,<span class="dt">by =</span> <span class="dv">1</span>)
<span class="co">#  [1]  1  2  3  4  5  6  7  8  9 10</span></code></pre></div>
<p>Quando quisermos salvar um determinado vetor em um objeto <code>x</code>, basta utilizarmos o operador de atribuição <code>&lt;-</code> da seguinte maneira <code>x &lt;- c(1:10)</code>.</p>
<p>A lógica é a mesma para criar vetores com outros tipos de dados, como por exemplo criar um vetor contendo as primeiras letras do alfabeto e outro com os primeiros dias de 2017.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>letras &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>,<span class="st">&quot;d&quot;</span>)
&gt;<span class="st"> </span>letras
<span class="co"># [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</span>
&gt;<span class="st"> </span>dias &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="kw">as.Date</span>(<span class="st">&quot;01/01/2017&quot;</span>,<span class="dt">format=</span><span class="st">&quot;%d/%m/%Y&quot;</span>),<span class="dt">length.out =</span> <span class="dv">5</span>,<span class="dt">by =</span> <span class="st">&quot;day&quot;</span>)
&gt;<span class="st"> </span>dias
<span class="co"># [1] &quot;2017-01-01&quot; &quot;2017-01-02&quot; &quot;2017-01-03&quot; &quot;2017-01-04&quot; &quot;2017-01-05&quot;</span></code></pre></div>
<p>Não se preocupe caso não tenha ficado claro a sintaxe do vetor <code>dias</code>, mais para frente vamos discutir em maior detalhe datas<a href="#fn10" class="footnoteRef" id="fnref10"><sup>10</sup></a></p>
</div>
<div id="acessando-elementos" class="section level3 unnumbered">
<h3>Acessando elementos</h3>
<p>Acessar elementos específicos de vetores é algo muito útil (acreditem no que eu digo) e fácil, basta utilizar <code>x[i]</code>, onde <code>x</code> é um vetor e <code>i</code> o i-ésimo elemento<a href="#fn11" class="footnoteRef" id="fnref11"><sup>11</sup></a>. No chunk abaixo segue mostro alguns exemplos de como acessar elementos dos vetores</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">10</span>) <span class="co"># criando um vetor x</span>
&gt;<span class="st"> </span>x[<span class="dv">7</span>:<span class="dv">9</span>]       <span class="co"># pegando elementos de 7 a 9</span>
<span class="co"># [1] 7 8 9</span>
&gt;<span class="st"> </span>x[<span class="kw">length</span>(x)] &lt;-<span class="st"> </span><span class="dv">0</span> <span class="co"># substituindo o último elemento por 0</span>
&gt;<span class="st"> </span>y &lt;-<span class="st"> </span>x[<span class="dv">1</span>:<span class="dv">4</span>]</code></pre></div>
<p>A última linha do chunk acima crian um novo vetor <code>y</code> com os 4 primeiros valores do vetor <code>x</code>, ou seja, mais um jeito de se criar vetores.<br />
Mais adiante no livro<a href="#fn12" class="footnoteRef" id="fnref12"><sup>12</sup></a> mostraremos que os filtros utilizados nos dados (como por exemplo selecionar de um banco de dados apenas os pacientes com pressão arterial acima de 140 X 90 mmHg) nada mais é do que acessar elementos do vetores que satisfaçam de terminadas condições.</p>
</div>
<div id="operacoes-vetorizadas" class="section level3 unnumbered">
<h3>Operações Vetorizadas</h3>
<p>Dizer que as operações são vetorizadas é apenas dizer que ao aplicar uma funções em um vetor essa função será aplicada em cada um dos elementos do vetor. Daí inclusive a importância de internamente o R não aceitar vetores com tipos de informação diferentes, pois não faria sentido, por exemplo, efetuar a multiplicação em um vetor que contem letras!! A ideia é bastante simples e intuitiva, porém não custa nada visualizar alguns exemplos.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>,<span class="dv">49</span>,<span class="dv">64</span>,<span class="dv">81</span>)
&gt;<span class="st"> </span><span class="kw">sqrt</span>(a) <span class="co"># sqrt é a raiz quadrada</span>
<span class="co"># [1] 1 2 3 4 5 6 7 8 9</span>
&gt;<span class="st"> </span>a<span class="dv">+1</span>
<span class="co"># [1]  2  5 10 17 26 37 50 65 82</span></code></pre></div>
<p>Perceba que cada vez que uma função é aplicada no vetor ela na verdade é aplicada em cada elemento que compõe o vetor. O último aspecto importante para se introduzir sobre vetores é a reciclagem.</p>
</div>
<div id="reciglagem" class="section level3 unnumbered">
<h3>Reciglagem</h3>
<p>O que você imagina que acontece quando a operação <code>c(1,2)+c(1,1,1,1)</code> é efetuada? O nome da subseção já da uma boa dica. O que acontece é que o vetor de menor comprimento é reciclado, isto é, reutilizado, para que a operação seja efetuada e resultando no seguinte vetor <code>c(2,3,2,3)</code>. Importante salientar que isso ocorre quando comprimento do maior vetor é múltiplo do comprimento do vetor menor, caso não seja este caso será retornado um erro. O chunk abaixo explicita essas duas situações</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)+<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>)
<span class="co"># [1] 2 3 2 3</span>
&gt;<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)+<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>)
<span class="co"># [1] 2 3 2 3 2</span></code></pre></div>
</div>
</div>
<div id="matrizes" class="section level2">
<h2><span class="header-section-number">3.3</span> Matrizes</h2>
<p>A segunda estutura apresentada é a matriz, que nada mais é do que uma extensão do vetor para uma dimensão a mais. Colocando de outro jeito uma <strong>matriz é uma estrutura com colunas com o mesmo número de linhas e que armazenam o mesmo tipo de informação</strong>. O leitor provavelmente já se deparou em algum momento da vida com uma matriz do seguinte formato</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> letters[<span class="dv">1</span>:<span class="dv">6</span>],<span class="dt">ncol=</span><span class="dv">3</span>)
<span class="co">#      [,1] [,2] [,3]</span>
<span class="co"># [1,] &quot;a&quot;  &quot;c&quot;  &quot;e&quot; </span>
<span class="co"># [2,] &quot;b&quot;  &quot;d&quot;  &quot;f&quot;</span></code></pre></div>
<p>Assim como foi feito com vetores, vamos mostrar como criar matrizes do zero, como acessar seu elementos e por fim como discutiremos a título de informação, não se preocupem, sobre operações matemática com matrizes.</p>
<div id="criando-matrizes" class="section level3 unnumbered">
<h3>Criando Matrizes</h3>
<p>Para criar matriz utilize a função de nome <code>matrix()</code>, que surpresa, na qual são necessários no mínimo dois argumentos. O argumento <code>data</code> para o qual deve ser passado um vetor que irá popular a matriz e o segundo argumento necessário é ou <code>ncol</code>ou <code>nrow</code>, especificando claramente o número de colunas ou o número de linhas. Perceba que é importante que o vetor passado para <code>data</code> tenha um comprimento compátivel com o número de linhas ou número de colunas. Abaixo tem o exemplo de como criar uma matriz</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>matriz_simples &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">25</span>),<span class="dt">nrow =</span> <span class="dv">5</span>,<span class="dt">byrow =</span> <span class="ot">TRUE</span>)
&gt;<span class="st"> </span>matriz_simples
<span class="co">#      [,1] [,2] [,3] [,4] [,5]</span>
<span class="co"># [1,]    1    2    3    4    5</span>
<span class="co"># [2,]    6    7    8    9   10</span>
<span class="co"># [3,]   11   12   13   14   15</span>
<span class="co"># [4,]   16   17   18   19   20</span>
<span class="co"># [5,]   21   22   23   24   25</span></code></pre></div>
<p>O terceiro argumento <code>byrow</code> recebe um valor lógico, e tem como default <code>FALSE</code> e como o nome diz ele indica se a matriz deve ser preenchida por linhas, <code>byrow=TRUE</code> ou por colunas. Perceba que na primeira matriz apresentada nesta seção não tem o esse argumento e por consequência a matriz foi preenchida por colunas.</p>
</div>
<div id="acessando-elementos-1" class="section level3 unnumbered">
<h3>Acessando Elementos</h3>
<p>Como a matriz é uma extensão dos vetores a ideia é a mesma, com a única diferença que é necessário diferenciar o indexador de linha e de coluna. E isso é feito de maneira muito simples e direta com o operador <code>[]</code>, da seguinte maneira: <code>matriz[i,j]</code> onde <code>i</code> denota as linhas e <code>j</code> denota as colunas. Caso quiséssemos pegar somente os elementos das duas primeiras linhas e das duas últimas colunas da <code>matriz_simples</code> uma maneira seria</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>matriz_simples[-<span class="kw">c</span>(<span class="dv">3</span>:<span class="dv">5</span>),<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>)]
<span class="co">#      [,1] [,2]</span>
<span class="co"># [1,]    4    5</span>
<span class="co"># [2,]    9   10</span></code></pre></div>
<p>Note que usamos <code>-c(3:5)</code> para indicar que queremos todas as linhas menos as linhas 3, 4, 5. O mesmo poderia ter sido feito para as colunas. Vale destacar uma sutileza importante para compreender a utilização de matrizes no R. Pode haver casos em que desejamos acessar apenas uma coluna (ou linha) específica de uma determinada matriz e acredito que a tentativa mais natural para todos seria algo como <code>matriz_simples[,3]</code>, mas ao executar esse comando no console teríamos como resultado</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>matriz_simples[,<span class="dv">3</span>]
<span class="co"># [1]  3  8 13 18 23</span></code></pre></div>
<p>Um vetor! E neste caso teríamos que nos perguntar: Queremos que o resultado da nossa operação (selecionar uma ou coluna especifica) seja um vetor ou uma matriz coluna (ou linha)? Caso a resposta seja um vetor deve ser executado o comando como acima, porém caso não seja esse o caso adicionamos o argumento <code>drop=FALSE</code> fazendo com que a estrutura de matriz seja preservada.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>matriz_simples[,<span class="dv">3</span>, drop =<span class="st"> </span>F]
<span class="co">#      [,1]</span>
<span class="co"># [1,]    3</span>
<span class="co"># [2,]    8</span>
<span class="co"># [3,]   13</span>
<span class="co"># [4,]   18</span>
<span class="co"># [5,]   23</span></code></pre></div>
<p>Por fim, note que o resultado de não selecionar nenhuma coluna é selecionar todas as colunas, e o mesmo se aplica para colunas. E neste caso as operações que efetuarmos nas matrizes coluna ou linha serão automaticamente vetorizadas.</p>
</div>
<div id="operacoes-com-matrizes" class="section level3 unnumbered">
<h3>Operações com matrizes</h3>
<p>Vamos aqui mostrar a título de informação algumas operações matemáticas com matrizes. Digo a título de informação, pois constatei na minha experiência que a utilização dessas operações é rara, porém acredito que seja importante saber da existência.</p>
<p>Antes de mostarmos os procedimentos vamos criar duas matrizes para trabalharmos com elas, vamos criativamente chama-las matrix_1 e matrix_2.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>matrix_1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="dv">1</span>:<span class="dv">6</span>,<span class="dt">ncol =</span> <span class="dv">3</span>)
&gt;<span class="st"> </span>matrix_2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="dv">1</span>:<span class="dv">6</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</code></pre></div>
<div id="multiplicacao-e-soma" class="section level4 unnumbered">
<h4>Multiplicação e Soma</h4>
<p>De maneira geral podemos nos deparar com dois casos: (i) queremos somar/multiplicar um número com/por uma matriz ou (ii) queremos multiplicar duas matrizes.</p>
<p>Quando nos encontramos no primeiro (somar/multiplicar um número por um matriz) caso basta usar os operadores apresentados na seção <strong>colocar aqui a referencia para a seção R como calculadora</strong> e a operação é aplicada em cada elemento da matrix, como feito no chunk que segue</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="dv">3</span>+matrix_1
<span class="co">#      [,1] [,2] [,3]</span>
<span class="co"># [1,]    4    6    8</span>
<span class="co"># [2,]    5    7    9</span>
&gt;<span class="st"> </span><span class="dv">3</span>*matrix_2
<span class="co">#      [,1] [,2]</span>
<span class="co"># [1,]    3   12</span>
<span class="co"># [2,]    6   15</span>
<span class="co"># [3,]    9   18</span>
&gt;<span class="st"> </span><span class="kw">sqrt</span>(matrix_1)
<span class="co">#          [,1]     [,2]     [,3]</span>
<span class="co"># [1,] 1.000000 1.732051 2.236068</span>
<span class="co"># [2,] 1.414214 2.000000 2.449490</span></code></pre></div>
<p>Já no segundo caso (multiplicar matrizes) temos que colocar o operador <code>*</code> entre <code>%</code>s para que o R entenda que queremos efetuar operações matriciais</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>matrix_1 %*%<span class="st"> </span>matrix_2
<span class="co">#      [,1] [,2]</span>
<span class="co"># [1,]   22   49</span>
<span class="co"># [2,]   28   64</span></code></pre></div>
<p>É claro que as matrizes devem ter dimensões vpalidas para que a multiplicação seja efetuada.</p>
</div>
<div id="determinante-transposta-e-inversa" class="section level4 unnumbered">
<h4>Determinante, Transposta e Inversa</h4>
<p>Brevemente vamos apresentar as funções para obtermos o determinante, a transposta e a inversa de uma matriz. Começamos com o determinante que é calculado através da função <code>det()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>matriz &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">4</span>),<span class="dt">ncol=</span><span class="dv">2</span>,<span class="dt">byrow =</span> T)
&gt;<span class="st"> </span><span class="kw">det</span>(matriz)
<span class="co"># [1] -2</span></code></pre></div>
<p>A transposta por sua vez é calculada através da função <code>t()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">t</span>(matriz)
<span class="co">#      [,1] [,2]</span>
<span class="co"># [1,]    1    3</span>
<span class="co"># [2,]    2    4</span></code></pre></div>
<p>E por fim a inversa é obtida através da função <code>solve()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">solve</span>(matriz)
<span class="co">#      [,1] [,2]</span>
<span class="co"># [1,] -2.0  1.0</span>
<span class="co"># [2,]  1.5 -0.5</span></code></pre></div>
<p>Passamos agora para a estrutura chamda de <em>data frame</em>, que funciona com os principios de vetores e matrizes, porém com algumas modificações que a tornam muito útil na prática.</p>
</div>
</div>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">3.4</span> Data Frames</h2>
<p>Os data frames possuem a mesma estrutura que uma matriz, isto é, colunas com o mesmo número de linhas. Porém, há duas vantagens de se trabalhar com data frames<a href="#fn13" class="footnoteRef" id="fnref13"><sup>13</sup></a>: (i) Cada coluna pode contar tipos de informações diferentes e (ii) nomeando as colunas podemos acessar colunas específicas sem precisar saber exatamente a indexação da coluna. Essas duas diferenças tornam os data frames o jeito mais comum de se trabalhar com bases de dados no R. Pois podemos ter diversas variáveis, relacionadas a mesma observação, com tipos de informação diferente em uma mesma estrutura! O leitor atento percebeu que a tabela @ref(tab:empregados) é na verdade um exemplo de data frame, onde cada coluna representa uma variável com tipo diferente de informação.</p>
<p>Para acessar colunas pelo nome utiliza-se o <code>$</code> logo em seguida do nome do data frame. Caso quissésemos acessar só os nomes do nosso data frame de empregados poderíamos fazer da seguinte maneira:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>empregados$Nome
<span class="co">#  [1] &quot;Mia&quot;      &quot;William&quot;  &quot;Gregory&quot;  &quot;Amanda&quot;   &quot;Mahmood&quot;  &quot;Abigail&quot; </span>
<span class="co">#  [7] &quot;Tasina&quot;   &quot;Julian&quot;   &quot;Devika&quot;   &quot;Nicholas&quot;</span></code></pre></div>
<p>O RStudio possui uma ferramenta conveniente para nos ajudar, ao digitar <code>empregados$</code> e em seguida pressionar <code>TAB</code> o RStudio mostrará um menu <em>dropdown</em> com os nomes das colunas do data frame, como mostra a figura @ref(fig:rstudio-dropdown-menu), de modo que não é necessário sabermos qual o número da coluna em que se encontra a variável de interesse e nem ter que saber de cabeça o nome de todas as variáveis disponíveis no data frame.</p>
<div class="figure" style="text-align: center">
<img src="images/_empregados_colunas.png" alt="Menu Dropdown do RStudio" width="682" />
<p class="caption">
(#fig:rstudio-dropdown-menu)Menu Dropdown do RStudio
</p>
</div>
<p>Outra utilidade do <code>$</code> quando se tratando de data frames é adicionar novas variáveis ao data frame. Ainda no nosso exemplo do data frame com informações sobre os empregados, poderíamos pensar que foi oferecido aos empregados um treinamento no qual a participação é optativa e depois que o treinamento foi realizado gostaríamos de adicionar uma coluna indicando quais empregados optaram por participar do treinamento. Para facilitar o entendimento vamos supor que os 5 primeiros empregados () optaram por participar do treinamento e os últimos 5 por não participar. Desse modo queremos adicionar uma coluna com o nome de <code>Treinamento</code> que receberá o valor <code>sim</code> caso o empregado tenha participado do treinamento e <code>não</code> caso ele não tenha participado. Isso é feito da seguinte maneira:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>empregados$Treinamento &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;sim&quot;</span>,<span class="dv">5</span>),<span class="kw">rep</span>(<span class="st">&quot;não&quot;</span>,<span class="dv">5</span>))</code></pre></div>
<p>A sintaxe <code>c(rep(&quot;sim&quot;,5),rep(&quot;não&quot;,5))</code> cria um vetor repetindo o termo <code>sim</code> cinco vezes e depois repetindo o termo <code>não</code> também cinco vezes. Agora se verificarmos nosso data frame veremos que a coluna <code>Treinamento</code> adicionada com sucesso.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">str</span>(empregados)
<span class="co"># &#39;data.frame&#39;: 10 obs. of  7 variables:</span>
<span class="co">#  $ Nome         : chr  &quot;Mia&quot; &quot;William&quot; &quot;Gregory&quot; &quot;Amanda&quot; ...</span>
<span class="co">#  $ Tempo_emprego: int  1 2 3 4 5 6 7 8 9 10</span>
<span class="co">#  $ Setor        : Factor w/ 3 levels &quot;Estrutura&quot;,&quot;Financeiro&quot;,..: 2 2 1 1 3 3 3 1 1 1</span>
<span class="co">#  $ Peso         : num  40.4 44.8 38.4 32.7 36.1 ...</span>
<span class="co">#  $ Nascimento   : Date, format: &quot;1999-06-23&quot; &quot;1999-11-07&quot; ...</span>
<span class="co">#  $ Casado       : logi  TRUE TRUE FALSE TRUE FALSE FALSE ...</span>
<span class="co">#  $ Treinamento  : chr  &quot;sim&quot; &quot;sim&quot; &quot;sim&quot; &quot;sim&quot; ...</span></code></pre></div>
<p>Destaco aqui que não mostro como criar data frame do zero, pois como mencionado no início desta seção, os data frames são muito utilizados para armazenar dados que serão importados para dentro do R <strong>(colocar aqui o capitulo que falará sobre importar dados para o R)</strong> e não digitados no console ou script.</p>
</div>
<div id="listas" class="section level2">
<h2><span class="header-section-number">3.5</span> Listas</h2>
<p>A última estrutura de dados é chamada de lista (ou vetor recursivo). De maneira objetiva a lista é um vetor no qual seus elementos podem ser qualquer outro tipo de estrutura, isto quer dizer que podemos ter uma lista que contém vetor, matrizes, data frames, listas e etc. Perceba que ao passo que o data frame tem colunas com o mesmo número de linhas as listas tem elementos que não só podem ter número de linhas diferentes como estruturas de dados diferentes! Caso a explicação até agora esteja um pouco abstrata, não se preocupe pois antes de entrarmos na discussão mesmo sobre listas vamos apresentar um exemplo de como as listas são realmente úteis e versáteis quando utilizamos o R.</p>

<div class="example">
<p><span id="exm:unnamed-chunk-40" class="example"><strong>(#exm:unnamed-chunk-40) (Versatilidade da Estrututa Lista)  </strong></span>O objetivo desse exemplo é mostrar uma aplicação de como as listas são usadas dentro R, faremos isso mostrando que ao efetuar uma regressão no R os resultados são armazenados em uma lista. Para tal vamos utilizar o dataset <em>gapminder</em> (disponível no pacote gapminder) que é um excerto sobre dados de expectativa de vida, PIB per capita e população por país. Vamos construir um modelo do tipo log-log, para avaliar os efeitos em termos percentuais, onde a expectativa de vida depende do PIB percapita e do tamanho da população.</p>
A figura @ref(fig:exemplo-versatilidade-lista) traz o resultado da estimação da regressão. Perceba que a regressão, salva com o nome de <code>reg</code>, e o sumário da regressão, salvo como <code>sumario_reg</code>, são listas com 12 e 11 elementos respectivamente. E ao executar o sumário da regressão (linha 4) temos o resultado completo do sumário armazenado na lista. (Obs: não se preocupe em entender o código da figura, mais para frente <strong>colocar aqui a seção de sregressão</strong> iremos discutir em detalhes como fazer regressão no R).
</div>

<div class="figure" style="text-align: center">
<img src="images/_exemplo_versatilidade_lista.png" alt="Ambiente com objeto regressão" width="683" />
<p class="caption">
(#fig:exemplo-versatilidade-lista)Ambiente com objeto regressão
</p>
</div>
<p>Espero que esse exemplo tenha ilustrado como as listas são versáteis e tenha facilitado o entendimento das mesmas, pois tenho certeza que o leitor irá se deparar em diversas situações com listas.</p>
<div id="criando-listas" class="section level3 unnumbered">
<h3>Criando listas</h3>
<p>Para criar uma lista utiliza-se função <code>list()</code> onde os argumentos são os nomes dos elementos e os elementos em si. Uma lista simples pode ser criada da seguinte maneira:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>lista &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">nomes =</span> empregados$Nome,
+<span class="st">               </span><span class="dt">data_frame =</span> empregados[<span class="dv">1</span>:<span class="dv">4</span>,-<span class="dv">1</span>],
+<span class="st">               </span><span class="dt">lista =</span> <span class="kw">list</span>(<span class="dt">numeros=</span><span class="dv">1</span>:<span class="dv">10</span>,<span class="dt">aleatorio=</span><span class="kw">rnorm</span>(<span class="dv">4</span>)))</code></pre></div>
<p>Veja que é possível ter listas como elementos de uma lista (por isso listas são também chamadas de vetores recursivos). Para visualizar a lista no console podemos executar o nome da listano conseole, neste caso <code>lista</code>, nos dando o seguinte resultado:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>lista
<span class="co"># $nomes</span>
<span class="co">#  [1] &quot;Mia&quot;      &quot;William&quot;  &quot;Gregory&quot;  &quot;Amanda&quot;   &quot;Mahmood&quot;  &quot;Abigail&quot; </span>
<span class="co">#  [7] &quot;Tasina&quot;   &quot;Julian&quot;   &quot;Devika&quot;   &quot;Nicholas&quot;</span>
<span class="co"># </span>
<span class="co"># $data_frame</span>
<span class="co">#   Tempo_emprego      Setor     Peso Nascimento Casado Treinamento</span>
<span class="co"># 1             1 Financeiro 40.37228 1999-06-23   TRUE         sim</span>
<span class="co"># 2             2 Financeiro 44.75095 1999-11-07   TRUE         sim</span>
<span class="co"># 3             3  Estrutura 38.40362 1999-10-01  FALSE         sim</span>
<span class="co"># 4             4  Estrutura 32.65491 1999-03-30   TRUE         sim</span>
<span class="co"># </span>
<span class="co"># $lista</span>
<span class="co"># $lista$numeros</span>
<span class="co">#  [1]  1  2  3  4  5  6  7  8  9 10</span>
<span class="co"># </span>
<span class="co"># $lista$aleatorio</span>
<span class="co"># [1] -0.86749760 -1.11188778  0.30293817  0.08144184</span></code></pre></div>
<p>De modo que conseguimos visualizar e entender o que está dentro da nossa lista, porém em casos reais as listas são maiores e com objetos mais complexos e a melhor opção para entender a lista em questão é utilizar a função <code>str()</code>, que nos da o seguinte resultado</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">str</span>(lista)
<span class="co"># List of 3</span>
<span class="co">#  $ nomes     : chr [1:10] &quot;Mia&quot; &quot;William&quot; &quot;Gregory&quot; &quot;Amanda&quot; ...</span>
<span class="co">#  $ data_frame:&#39;data.frame&#39;:   4 obs. of  6 variables:</span>
<span class="co">#   ..$ Tempo_emprego: int [1:4] 1 2 3 4</span>
<span class="co">#   ..$ Setor        : Factor w/ 3 levels &quot;Estrutura&quot;,&quot;Financeiro&quot;,..: 2 2 1 1</span>
<span class="co">#   ..$ Peso         : num [1:4] 40.4 44.8 38.4 32.7</span>
<span class="co">#   ..$ Nascimento   : Date[1:4], format: &quot;1999-06-23&quot; ...</span>
<span class="co">#   ..$ Casado       : logi [1:4] TRUE TRUE FALSE TRUE</span>
<span class="co">#   ..$ Treinamento  : chr [1:4] &quot;sim&quot; &quot;sim&quot; &quot;sim&quot; &quot;sim&quot;</span>
<span class="co">#  $ lista     :List of 2</span>
<span class="co">#   ..$ numeros  : int [1:10] 1 2 3 4 5 6 7 8 9 10</span>
<span class="co">#   ..$ aleatorio: num [1:4] -0.8675 -1.1119 0.3029 0.0814</span></code></pre></div>
<p>O output retornado no console da função <code>str()</code> nos mostra que o nosso objeto <code>lista</code> é uma lista de 3 elementos. Onde o primeiro elemento é o vetor <code>nomes</code>, o segundo elemento é um data frame com nome de <code>data_frame</code>e o terceiro elemento é uma lista com dois elementos chamada de <code>lista</code>.</p>
</div>
<div id="acessando-elementos-das-listas" class="section level3 unnumbered">
<h3>Acessando elementos das listas</h3>
<p>De maneira geral há duas maneiras de acessar os elemtos de uma lista: (i) pelo nome dos elementos; e (ii) através da indexação. Para acessar pelo nome basta utilizar o <code>$</code> como feito com data frames, note que o menu dropdown funciona aqui da mesma forma.</p>
<p>A outra maneira de acessar elementos de uma lista á através da indexação, que neste caso devemos ter atenção a um sútil detalhe. De maneira similar as outras estruturas de dados usamos o <code>nome_da_lista[i]</code> para acessar o i-ésimo elemento da lista, mas também podemos acessar o mesmo elemento utilizando <code>[[]]</code>, isso mesmo chaves duplas.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>x &lt;-<span class="st"> </span>lista[<span class="dv">1</span>]
&gt;<span class="st"> </span>y &lt;-<span class="st"> </span>lista[[<span class="dv">1</span>]]</code></pre></div>
<p>Essa diferença pode parecer inofensiva de início, porém ao observar qual é a estrutura de <code>x</code> e de <code>y</code> nos revela a diferença.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">str</span>(x)
<span class="co"># List of 1</span>
<span class="co">#  $ nomes: chr [1:10] &quot;Mia&quot; &quot;William&quot; &quot;Gregory&quot; &quot;Amanda&quot; ...</span>
&gt;<span class="st"> </span><span class="kw">str</span>(y)
<span class="co">#  chr [1:10] &quot;Mia&quot; &quot;William&quot; &quot;Gregory&quot; &quot;Amanda&quot; &quot;Mahmood&quot; ...</span></code></pre></div>
<p>Vemos que <code>x</code> é uma lista com o vetor <code>nomes</code> sendo o único elemnto e que <code>y</code> é o vetor <code>nomes</code>. Ou seja, utilizar <code>[]</code> (chaves simples) retorna uma lista ao passo que utilizar <code>[[]]</code> (chaves duplas) retorna a estrutura de dados no elemento que está sendo acessado!</p>
</div>
</div>
<div id="resumo-melhorar-nome" class="section level2">
<h2><span class="header-section-number">3.6</span> resumo (melhorar nome)</h2>
<p>Para sintetizar o que foi apresentado neste capítulo a lista abaixo mostra uma ideia geral de para que são utilizadas na maior parte das vezes cada uma das estruturas de dados no R:</p>
<ul>
<li><code>vetor</code> = usados salvar uma variável com elementos do mesmo tipo de dado;</li>
<li><code>matriz</code> = usadadas para armazenar mais de uma variável do mesmo tipo de dado;</li>
<li><code>data frame</code> = usados para armazenar mais de uma variável, podendo serem de tipos de dados diferentes (banco de dados);</li>
<li><code>listas</code> = usadas para salvar resultador de estimações valores retornados de função etc.</li>
</ul>
<!--chapter:end:03-estruturas_de_dados.Rmd-->
<div id="refs" class="references">
<div id="ref-abadie2010synthetic">
<p>Abadie, Alberto, Alexis Diamond, and Jens Hainmueller. 2010. “Synthetic Control Methods for Comparative Case Studies: Estimating the Effect of California’s Tobacco Control Program.” <em>Journal of the American Statistical Association</em> 105 (490). Taylor &amp; Francis: 493–505.</p>
</div>
<div id="ref-matloff2011">
<p>Matloff, Norman. 2011. <em>The Art of R Programming: A Tour of Statistical Software Design</em>. No Starch Press.</p>
</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Tradução livre: Execute todas a linhas em um comando<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Ele é na verdade muito mais abrangente e complexo do que isso, mas para nós isso é o que importa<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Estamos chamando de operações pois é uma maneira mais direta de se entender, sob uma perspectiva formal matemática seria incorreto utilizar essa nomeclatura<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>Estatística inferentista<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>Colocar aqui explicação sobre o significado do alpha e intervalo de confiança em termos dos tipos de erro I e II<a href="#fnref5">↩</a></p></li>
<li id="fn6"><p>Ressaltamos aqui que o termo objeto não tem a mesma conotação que teria no caso de liguagens orientadas a objetos<a href="#fnref6">↩</a></p></li>
<li id="fn7"><p>Veja <span class="citation">Abadie, Diamond, and Hainmueller (<a href="#ref-abadie2010synthetic">2010</a>)</span> para mais detalhes<a href="#fnref7">↩</a></p></li>
<li id="fn8"><p>Operação binária quer dizer que são necessários dois elementos para que ela ocorra, em contrapartida operações unitárias necessitam apenas de um elemente para que ela ocorra. Precisamos de dois números para que eles sejam somados (mesmo que eles sejam iguais), mas precisamos apenas de um número para termos um valor absoluto<a href="#fnref8">↩</a></p></li>
<li id="fn9"><p>Na estatística existem basicamente dois tipos de variáveis cada uma delas com dois subtipos. A primeira é chamada de variáveis qualitativas, que podem assumir valores nominais, por exemplo Nomes, ou assumir valores ordinais, por exemplo dividir peso pena, peso médio etc. O segundo tipo de variável é chamado de variáveis quantitativas, que podem ser intervalos, por exemplo a previsão do tempo quando nos traz temperatura miníma e máxima, ou assumir valore pontuais, como por exemplo a medição do pesos das pessoas<a href="#fnref9">↩</a></p></li>
<li id="fn10"><p><strong>colocar aqui depois a seção na qual isso é discutido</strong><a href="#fnref10">↩</a></p></li>
<li id="fn11"><p>Ressaltamos para aqueles que são familiares com outro linguagem de programação, como C, a indexação dos vetores no R começa em 1 e não em 0.<a href="#fnref11">↩</a></p></li>
<li id="fn12"><p><strong>colocar aqui no final as seções corretas</strong><a href="#fnref12">↩</a></p></li>
<li id="fn13"><p>Para aqueles que conhecem um pouco de computação a única desvantagem do data frame em relação a matriz é que as operação feitas com data frames são significativamente mais lentas do que quando feitas com matrizes, isso ocorre devido ao jeti de como as informações são salvas na mémoria do computador<a href="#fnref13">↩</a></p></li>
</ol>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
